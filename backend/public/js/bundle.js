/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={846:(e,r,t)=>{!function(){"use strict";var r=t(418),n=t(181),o={origin:"*",methods:"GET,HEAD,PUT,PATCH,POST,DELETE",preflightContinue:!1,optionsSuccessStatus:204};function a(e){return"string"==typeof e||e instanceof String}function s(e,r){if(Array.isArray(r)){for(var t=0;t<r.length;++t)if(s(e,r[t]))return!0;return!1}return a(r)?e===r:r instanceof RegExp?r.test(e):!!r}function i(e,r){var t,n=r.headers.origin,o=[];return e.origin&&"*"!==e.origin?a(e.origin)?(o.push([{key:"Access-Control-Allow-Origin",value:e.origin}]),o.push([{key:"Vary",value:"Origin"}])):(t=s(n,e.origin),o.push([{key:"Access-Control-Allow-Origin",value:!!t&&n}]),o.push([{key:"Vary",value:"Origin"}])):o.push([{key:"Access-Control-Allow-Origin",value:"*"}]),o}function c(e){return!0===e.credentials?{key:"Access-Control-Allow-Credentials",value:"true"}:null}function d(e){var r=e.exposedHeaders;return r?(r.join&&(r=r.join(",")),r&&r.length?{key:"Access-Control-Expose-Headers",value:r}:null):null}function u(e,r){for(var t=0,o=e.length;t<o;t++){var a=e[t];a&&(Array.isArray(a)?u(a,r):"Vary"===a.key&&a.value?n(r,a.value):a.value&&r.setHeader(a.key,a.value))}}e.exports=function(e){var t=null;return t="function"==typeof e?e:function(r,t){t(null,e)},function(e,n,a){t(e,(function(t,s){if(t)a(t);else{var l=r({},o,s),h=null;l.origin&&"function"==typeof l.origin?h=l.origin:l.origin&&(h=function(e,r){r(null,l.origin)}),h?h(e.headers.origin,(function(r,t){r||!t?a(r):(l.origin=t,function(e,r,t,n){var o=[];"OPTIONS"===(r.method&&r.method.toUpperCase&&r.method.toUpperCase())?(o.push(i(e,r)),o.push(c(e)),o.push(function(e){var r=e.methods;return r.join&&(r=e.methods.join(",")),{key:"Access-Control-Allow-Methods",value:r}}(e)),o.push(function(e,r){var t=e.allowedHeaders||e.headers,n=[];return t?t.join&&(t=t.join(",")):(t=r.headers["access-control-request-headers"],n.push([{key:"Vary",value:"Access-Control-Request-Headers"}])),t&&t.length&&n.push([{key:"Access-Control-Allow-Headers",value:t}]),n}(e,r)),o.push(function(e){var r=("number"==typeof e.maxAge||e.maxAge)&&e.maxAge.toString();return r&&r.length?{key:"Access-Control-Max-Age",value:r}:null}(e)),o.push(d(e)),u(o,t),e.preflightContinue?n():(t.statusCode=e.optionsSuccessStatus,t.setHeader("Content-Length","0"),t.end())):(o.push(i(e,r)),o.push(c(e)),o.push(d(e)),u(o,t),n())}(l,e,n,a))})):a()}}))}}}()},418:e=>{"use strict";var r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(r).map((function(e){return r[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,a){for(var s,i,c=o(e),d=1;d<arguments.length;d++){for(var u in s=Object(arguments[d]))t.call(s,u)&&(c[u]=s[u]);if(r){i=r(s);for(var l=0;l<i.length;l++)n.call(s,i[l])&&(c[i[l]]=s[i[l]])}}return c}},181:e=>{"use strict";e.exports=function(e,r){if(!e||!e.getHeader||!e.setHeader)throw new TypeError("res argument is required");var n=e.getHeader("Vary")||"",o=Array.isArray(n)?n.join(", "):String(n);(n=t(o,r))&&e.setHeader("Vary",n)},e.exports.append=t;var r=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/;function t(e,t){if("string"!=typeof e)throw new TypeError("header argument is required");if(!t)throw new TypeError("field argument is required");for(var o=Array.isArray(t)?t:n(String(t)),a=0;a<o.length;a++)if(!r.test(o[a]))throw new TypeError("field argument contains an invalid header name");if("*"===e)return e;var s=e,i=n(e.toLowerCase());if(-1!==o.indexOf("*")||-1!==i.indexOf("*"))return"*";for(var c=0;c<o.length;c++){var d=o[c].toLowerCase();-1===i.indexOf(d)&&(i.push(d),s=s?s+", "+o[c]:o[c])}return s}function n(e){for(var r=0,t=[],n=0,o=0,a=e.length;o<a;o++)switch(e.charCodeAt(o)){case 32:n===r&&(n=r=o+1);break;case 44:t.push(e.substring(n,r)),n=r=o+1;break;default:r=o+1}return t.push(e.substring(n,r)),t}}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var a=r[n]={exports:{}};return e[n](a,a.exports,t),a.exports}(()=>{"use strict";t(846);var e=["second","minute","hour","day","week","month","year"],r=["秒","分钟","小时","天","周","个月","年"],n={},o=function(e,r){n[e]=r},a=[60,60,24,7,365/7/12,12];function s(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(parseInt(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(e))}o("en_US",(function(r,t){if(0===t)return["just now","right now"];var n=e[Math.floor(t/2)];return r>1&&(n+="s"),[r+" "+n+" ago","in "+r+" "+n]})),o("zh_CN",(function(e,t){if(0===t)return["刚刚","片刻后"];var n=r[~~(t/2)];return[e+" "+n+"前",e+" "+n+"后"]}));const i=new class{constructor(){this.URI="/api/chords"}async getChord(){const e=await fetch(this.URI);return await e.json()}async postChord(e){const r=await fetch(this.URI,{method:"POST",body:e}),t=await r.json();console.log(t)}async deleteChord(e){const r=await fetch(`${this.URI}/${e}`,{headers:{"Content-Type":"application/json"},method:"DELETE"}),t=await r.json();console.log(t)}},c=class{async renderChords(){const e=await i.getChord(),r=document.getElementById("chords-cards");r.innerHTML="",e.forEach((e=>{const t=document.createElement("div");var o,i,c,d;t.className="",t.innerHTML=`\n                <div class="card m-2">\n                    <div class="row">\n                        <div class="col-md-4">\n                            <img src="${e.imagePath}" alt="" class="img-fluid"/>\n                        </div>\n                        <div class="col-md-8">\n                            <div class="card-block px-2">\n                                <h4 class="card-title">${e.title}</h4>\n                                <p class="card-text">${e.author}</p>\n                                <p class="card-text">${e.year}</p>\n                                <a href="#" class="btn btn-danger delete" _id="${e._id}">X</a>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="card-footer">\n                        ${o=e.created_at,d=function(e,r){return(+(r?s(r):new Date)-+s(e))/1e3}(o,c&&c.relativeDate),function(e,r){for(var t=e<0?1:0,n=e=Math.abs(e),o=0;e>=a[o]&&o<a.length;o++)e/=a[o];return(e=Math.floor(e))>(0==(o*=2)?9:1)&&(o+=1),r(e,o,n)[t].replace("%s",e.toString())}(d,function(e){return n[e]||n.en_US}(i))}\n                    </div>\n                </div>       \n            `,r.appendChild(t)}))}async addNewChords(e){await i.postChord(e),this.clearChordForm(),this.renderChords()}clearChordForm(){document.getElementById("chord-form").reset()}renderMessage(e,r,t){const n=document.createElement("div");n.className=`alert alert-${r} message`,n.appendChild(document.createTextNode(e));const o=document.querySelector(".col-md-4"),a=document.querySelector("#chord-form");o.insertBefore(n,a),setTimeout((()=>{document.querySelector(".message").remove()}),t)}async deleteChord(e){await i.deleteChord(e),this.renderChords()}};document.addEventListener("DOMContentLoaded",(()=>{(new c).renderChords()})),document.getElementById("chord-form").addEventListener("submit",(e=>{const r=document.getElementById("title").value,t=document.getElementById("author").value,n=document.getElementById("year").value,o=document.getElementById("image").files,a=new FormData;a.append("image",o[0]),a.append("title",r),a.append("author",t),a.append("year",n);const s=new c;s.addNewChords(a),s.renderMessage("New Chord Added","success",3e3),e.preventDefault()})),document.getElementById("chords-cards").addEventListener("click",(e=>{if(e.target.classList.contains("delete")){const r=new c;r.deleteChord(e.target.getAttribute("_id")),r.renderMessage("Book deleted","danger",2e3)}e.preventDefault()}))})()})();
//# sourceMappingURL=bundle.js.map